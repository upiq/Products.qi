<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/general/macros/master"
      i18n:domain="Products.qi">
<head>
</head>

<body>
<div metal:fill-slot="main"
    tal:define="email string:email;
                subject string:subject;
                body string:body;
                baseErrors python:view.getError('base')">
                
<script language="Javascript">
function nosubmit()
{
    alert("To add a Mailing List you must click \"Add\"")
    return false
}

function showconfirm(id, thingname)
{
    window.scrollTo(0,0)
    document.getElementById('light').style.display='block';
    document.getElementById('fade').style.display='block'; 
    name=document.getElementById('listname');
    name.innerHTML=thingname;
    deleted=document.getElementById('deleted');
    deleted.value=id;
}

function hideconfirm()
{
    document.getElementById('light').style.display='none';
    document.getElementById('fade').style.display='none';
    name=document.getElementById('listname');
    name.innerHTML="";
    deleted=document.getElementById('deleted');
    deleted.value=-1;
}

</script>
<h2>Manage <tal:name content="context/title" /> Mailing Lists</h2>

<div id="light" class="white_content">Are you sure you want to delete
the <span id="listname"></span> mailing list?
<form action="."
    tal:attributes="action view/url" id="deletion" method="POST">
<input type="hidden" name="deleted" value="-1" id="deleted"/>
<input type="submit" name="delete" value="Yes"/>&nbsp;&nbsp;&nbsp;&nbsp;
<input type="button" value="No" onclick="javascript:hideconfirm()"/>
</form>

</div>

<div id="fade" class="black_overlay"></div>

<p class="description">
Listed below are the Mailing Lists that are available for 
    <tal:projectorteamname content="context/title" >
        Project or team name
    </tal:projectorteamname>.
    To modify the configuration for an existing list,
    click on the name of the list.
    Any changes you make will automatically be saved. 
    To cancel changes, you will have to manually recreate the original settings.
    To close a configuration panel,
    click on the Mailing List name at the top of the panel.
    To create a new Mailing List,
    use the section at the bottom of this page.
</p>
<tal:lists define="lists view/getCurrentLists">
<span id="listpanel">
    <tal:list repeat="list lists">
    <form>
    <input type="hidden" name="listid" tal:attributes="value list/id" />
    <input type="hidden" name="expanded" id="%s-expanded"
        tal:attributes="id python:'%s-expanded'%list.id" value="0" />
    <table class="listing" 
        tal:attributes="id python:'table-%s'%list.id">
        <tr>
            <th 
                tal:attributes="id python:'header-%s'%list.id;
                                listid list/id;"
                colspan="2">
                <span tal:content="list/listname" >
                List name goes here
                </span>
                <input type="button" value="+" class="mailinglistexpandable"/>
                
            </th>
        </tr>
    </table>
    </form>
    </tal:list>
</span>

<form onsubmit="return nosubmit()">
<fieldset>
<div id="errors"></div>



<h3>Create New Mailing List</h3>
<p class="description">
Enter the name and description and click the "Create" button. 
Then configure the list after it appears in the table above.

<br/>
Mailing list names may only contain letters, numbers, and dashes
(no spaces or special characters).
</p>
<label for="listname">List name</label>
<br/>
<input type="text" name="listname" />
<br/>
<label for="newdescription">Description</label><br/>
<textarea name="newdescription">
</textarea>
<input class="addlist" type="button" value="Create" />
</fieldset>
</form>
</tal:lists>
</div>
</body>
</html>
