<tal:dealy condition="view/delay" >
<tal:wrapper define="list view/viewedlist">
<table class="listing" 
        tal:attributes="id python:'table-%s'%list.id" >
<tr>
    <th class="" 
        tal:attributes="id python:'header-%s'%list.id;
                        listid list/id;"
                        colspan="2">
        <span tal:content="list/listname" >
                List name goes here
                </span>
        <input type="button" value="-" class="mailinglistexpandable"/>
    </th>
</tr>

<tr class="odd">
<td colspan="2" width="500">
<p class="description">
Use the <b>Add</b> and <b>Remove</b> buttons to customize the membership of 
this Mailing List.  You can add individuals,teams, or
 automatically created Mailing List groups (or any combination of these). 
</p>
</td>
</tr>
<tr class="even">
<td colspan="2">
<h3>Individual Members</h3>
<p class="description">
Use this section to add individual members to the Mailing List. 
(Note that members who subscribe themselves to this Mailing List will
 also be shown as subscribers here.)
</p>
</td>
</tr>
<tr class="even">
    <td>
        <h4>Subscribed Members</h4>
        <select multiple="true" name="removemembers:list" size="10">
            <tal:users repeat="avail view/subscribedMembers">
            <option value="who"
                tal:attributes="value avail/id"
                tal:content="python: '%s (%s)'%(avail['id'],avail['name'])">
                nobody</option>
            </tal:users>
        </select>
        <input type="button" value="Remove"
            class="removeusers" />

    </td>
    <td>
        <h4>Available Members</h4>
        <select multiple="true" name="addmembers:list" size="10">
            <tal:users repeat="avail view/nonsubscribedMembers">
            <option value="who"
                tal:attributes="value avail/id"
                tal:content="python: '%s (%s)'%(avail['id'],avail['name'])">
                nobody</option>
            </tal:users>
        </select>
        <input type="button" value="Add"
             class="addusers"/>
    </td>
</tr>


<tr class="odd" tal:condition="view/supportsteams">
<td colspan="2">
<h3>Teams</h3>
<p class="description">
Use this section to add teams to the Mailing List.
</p>
</td>
</tr>
<tr class="odd" tal:condition="view/supportsteams">
    <td>
        <h4>
        Subscribed Teams
        </h4>
        <select multiple="true" name="removeteams:list" size="5">
            <tal:teams repeat="team view/getCurrentTeams">
                <option tal:attributes="value team/id"
                        tal:content="team">
                </option>
            </tal:teams>
        </select>
        
        <input type="button" value="Remove"
             class="removeteams memberupdate"/>
    </td>
    <td>
        <h4>
        Available Teams
        </h4>
        <select multiple="true" name="addteams:list" size="5">
           <tal:teams repeat="team view/getAvailableTeams">
                <option tal:attributes="value team/id"
                        tal:content="team/name">
                </option>
            </tal:teams>
        </select>
        <input type="button" value="Add"
             class="addteams memberupdate"/>
    </td>
</tr>
<tr class="odd">
<td colspan="2">
<h3>Mailing List Groups</h3>
<p class="description">
These groups are created automatically. Members are added to these groups based 
on their roles within the project or teams. 
</p>
</td>
</tr>


<tr class="odd">
   
    <td valign="top">
        <h4>Subscribed Mailing List Groups</h4>
        <select multiple="true" name="removegroups">
        <tal:groups repeat="specialgroup list/groups/all">
        <option
            tal:attributes="value specialgroup/id"
                tal:content="python:'%s %s'%(view.context.title,specialgroup.groupname)">
                group name
        </option>
        </tal:groups>
        </select>
        <input type="button" class="removegroup" value="Remove" />
    </td>
    <td valign="top">
        <h4>Available Mailing List Groups</h4>
        <select multiple="true" name="availablegroups">
        
            <tal:groups repeat="group view/availableGroups">
            <option
                tal:attributes="value group/id"
                tal:content="python:'%s %s'%(view.context.title,group.groupname)">
                    group name
            </option>
            </tal:groups>
        </select>
        <input type="button" class="addgroup" value="Add"/>
    </td>

</tr>

<tr class="odd">
    <td colspan="2">
        <h3>Options</h3>
        <div>
        <input type="checkbox" name="replyable" class="listupdate" 
        tal:attributes="CHECKED list/replyable" />
        Allow replies?
        <p class="description">
        If this option is selected, 
        members of the Mailing List can reply and the replies will be 
        distributed to the Mailing List. If not selected, 
        replies will be blocked. 
        </p>

        </div>
        <div>
        <input type="checkbox" name="joinable" class="listupdate" 
        tal:attributes="CHECKED list/joinable"/>
        Allow members to subscribe themselves? 
        <p class="description">
            If checked, this Mailing List will appear on the member's
            subscription page under the 
            "My Options" menu, allowing members to
            subscribe themselves to the Mailing List. 
        </p>
        </div>
    </td>
</tr>
<tr class="even">
<td colspan="2">
<label>
Description
</label>
<p class="description">
This is a description of your Mailing List. For example,
    "Clinical Teams in North Carolina." 
This description will show in the archive list and on the subscription list.
</p>
<textarea name="description" tal:content="list/description">
</textarea>
<br />
<input type="button" value="Update Description" class="savedesc" />
</td>
</tr>
<tr class="odd">
<td colspan="2">
<h3> Delete This Mailing List</h3>
<p class="description">
Use this button to delete this mailing list.
Once deleted, you will not be able to retreive this list.
</p>
<input type="button" value="Delete"
 onclick="javascript:showconfirm()"
 tal:attributes="
 onclick python:'javascript:showconfirm(%i,\'%s\')'%(list.id,list.listname)" />
 </td>
</tr>
</table>
</tal:wrapper>
</tal:dealy>
