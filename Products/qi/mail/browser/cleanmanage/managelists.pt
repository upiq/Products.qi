<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/general/macros/master"
      i18n:domain="Products.qi">
<div metal:fill-slot="main">
	<h3 class="title">
		Manage mailing lists
	</h3>
	<p class="description">
		This page displays current mailing lists for <tal:bleh content="view/context/title" />.
		Click on a list name to mange to functions of the list.
		Use the form at the bottom of the page to create a new mailing list for 
		<tal:bleh content="view/context/title" />.
	</p>
		<div metal:use-macro="context/@@errormacro/macros/errorlist" />
	<h4><tal:name content=context/title /> Mailing Lists</h4>
	<table class="listing">
		<tr>
			<th>
			</th>
			<th>
				Name
			</th>
			<th>
				Description
			</th>
			<th>
				Email Address
			</th>
		</tr>
		<tal:mailinglists repeat="mailinglist view/alllists">
			<tr>
				<td>
					<form method="post" action="." tal:attributes="action view/url">
						<input type="hidden" name="listid:int" tal:attributes="value mailinglist/id" />
						<input type="image" name="delete" src="delete_icon.gif" class="borderless backgroundless" />
					</form>
				</td>
				<td>
					<a tal:attributes="href python:view.manageurl(mailinglist)" tal:content="mailinglist/listname" />
				</td>
				<td tal:content="mailinglist/description">
				</td>
				<td tal:content="python:view.makeaddress(mailinglist)">
				</td>
			</tr>
		</tal:mailinglists>
	</table>
	<form method="post" action="."
		tal:attributes="action view/url">
		<fieldset class="bottomaddform">
				<tal:listname define="
					inputkey string:listname;
					required python:True;
					fieldtext string:List Name;
					description string:The name of the newly created list;" >
					<div metal:use-macro="context/@@inputmacro/macros/validatedtext" />
				</tal:listname>
 				
				<tal:description tal:define="
					inputkey string:description;
					required python:True;
					fieldtext string:Description;
					description string:Describe this mailing list;">
					<div metal:use-macro="context/inputmacro/macros/validatedtext" />
				</tal:description>
			<input type="submit" name="add" value="Add new list" /> 
		</fieldset>
	</form>
	
	<h4><tal:name content=context/title /> Suborganization Mailing Lists</h4>
	<table class="listing">
		<tr>
			<th>
			</th>
			<th>
			    Team Name
		    </th>
			<th>
				Name
			</th>
			<th>
				Description
			</th>
			<th>
				Email Address
			</th>
		</tr>
		<tal:mailinglists repeat="mailinglist view/sublists">
			<tr>
				<td>
					<form method="post" action="." tal:attributes="action view/url">
						<input type="hidden" name="listid:int" tal:attributes="value mailinglist/id" />
						<input type="image" name="delete" src="delete_icon.gif" class="borderless backgroundless" />
					</form>
				</td>
				<td tal:content="mailinglist/team/name" />
				<td>
					<a tal:attributes="href python:'javascript:void()' or view.manageurl(mailinglist)" tal:content="mailinglist/listname" />
				</td>
				<td tal:content="mailinglist/description">
				</td>
				<td tal:content="python:view.makeaddress(mailinglist)">
				</td>
			</tr>
		</tal:mailinglists>
	</table>
</div>
</html>