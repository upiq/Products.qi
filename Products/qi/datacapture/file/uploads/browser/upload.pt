<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/general/macros/master"
      i18n:domain="Products.qi">
<head>
</head>

<body>
<div metal:fill-slot="main"
    tal:define="file string:file;
                type string:typename;
                baseErrors python:view.getError('base')">
    <div tal:condition="baseErrors" class="error">
    <h3>Import Error</h3>
    <p>
     The import was cancelled due to one or more problems that were encountered.
     The problems are listed below.
    </p>
    <p>
     Import problems may indicate that there are errors in the data file you are
     trying to import, or they may indicate that changes need to be made in 
     your project setup 
     (for example, measure definitions, team nicknames, etc.).
    </p>
    <p>
     Please review the list of problems below, make the necessary changes to the
     import file or the project setup, and re-import the data file. 
     If you need assistance in making the necessary changes, 
     please contact a project manager or the QI TeamSpace help desk.
    </p>
    </div>
    
    <tal:generalErrors condition="baseErrors" repeat="err baseErrors">
        <div class="error" tal:content="err">
            General error
        </div>
    </tal:generalErrors>



<form
    action='.'
    tal:attributes="action view/url"
  	method="post"
  	id="upload_data"
  	enctype="multipart/form-data">


    <h3>Import a data file</h3>
    <p>
    To import data into the project repository use the Browse
    or choose file button to 
    select the file you want to import, then click the Import button.
    </p>
	<fieldset id="upload">
		
		<div class="field"
             tal:condition="python:len(view.usedTypes())>0"
             tal:define="localname type;
                         errors python:view.getError(localname);
                         localvalue python:request.get(localname, -1)"
             tal:attributes="class python:errors and 'field error' or 'field'">


             <label i18n:translate="label_uploadtype_name"
                   tal:attributes="for localname">Data Format</label>

            <div><tal:errors repeat="error errors">
                <div tal:content="error">Validation error output</div>
            </tal:errors></div>

            <select
                   tal:attributes="name localname;
                                   id localname;
                                   "
               >
                   <tal:choices repeat="choice view/usedTypes">
                       <option 
                           tal:attributes="value choice;
                                            selected python:
                                            choice==localvalue" 
                           tal:content="choice">
                           </option>
                   </tal:choices>
                </select>
        </div>
		
		<div class="field"
 			tal:define="error python:view.getError(file)"
 			tal:attributes="class python:error and 'field error' or 'field'">


 			<label i18n:translate="label_uploadtype_name"
   				tal:attributes="for file">File to import</label>

			<div tal:content="error">Validation error output</div>

			<input type="file"
				size="50"
   				tal:attributes="name file;
   								id file;
   								"
   	        />
        </div>
        


        
		<div class="formControls">

			<input class="context"
   				type="submit"
   				name="submit"
   				value="Import"
   				/>

		</div>

	</fieldset>

</form>

</div>
</body>
</html>
