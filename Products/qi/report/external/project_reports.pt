<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<head>

</head>

<body>
<div metal:fill-slot="main"
	tal:define="reports view/getReports;
	           ">       
    <h3>Manage Project Reports</h3>
	<p class="description">
		The table below lists all reports available for <tal:projectname content="view/context/title" />.
		Click the run button to initiate a report.  Click the report name to view the results from previous 
		executions of this report.
	</p>
	<table class="listing">
        <tr class="list-header">
            <th>Report Name</th>
            <th>Last time initiated</th>
            <th>Status</th>
			<th></th>
        </tr>
	<tal:reports repeat="report reports">
		<tr
            tal:define="oddrow repeat/report/odd;"
            tal:attributes="class python:oddrow and 'odd' or 'even'">
                <td> 
					<a tal:content="report/displayname" tal:attributes="href python:'ReportBatches?reportid=%i'%report.id" />
				</td>
                <td tal:content="python:view.niceifydt(report.lasttriggertime)" />
              	<td tal:content="python:view.status(report.reportstate)" />
                <td>
    				<form tal:attributes="id python:'%i-details'%report.id"
						action="ReportBatches" tal:condition="python:report.reportstate &lt; 1">
                        <input type="hidden" name="reportid" value="%i" 
                            tal:attributes="value report/id"/>
                        <input value="Run" name="Run" type="submit"/>
                    </form>
                </td>
		</tr>
	</tal:reports>
	</table>
</div>
</body>
</html>
