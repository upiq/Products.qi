<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<body>
<metal:left fill-slot="column_one_slot" />
<metal:right fill-slot="column_two_slot" />

<metal:main fill-slot="content"
    tal:define="errors options/state/getErrors | nothing">
    <tal:main-macro metal:define-macro="main">
	<script type="text/javascript">
	function showhide(hidden, buttonobj)
	{
		element=document.getElementById(hidden)
		if (element.style.display=="none")
		{
			element.style.display="inline"
			buttonobj.value="-"
		}
		else if (element.style.display=="inline")
		{
			element.style.display="none"
			buttonobj.value="+"
		}
	}
	</script>
    <div class="documentEditable">
	<h3>My Projects</h3>
	<p class="description">
		This is a list of all projects you are a member of.   Click the project name to go directly to that project's home page.
		If a + icon is to the left of a project name, you are a member of one or more teams in this project.  
		Click the + to reveal these teams.
	</p>
	<table class="invisible">
	<tal:projects repeat="project view/projects" >

		<tal:inside tal:define="teams python:[x for x in view.teams() if x.getProject().id==project.id]">
		<tr>
		<td>
			<input type="button" value="+" tal:attributes="onclick python:'javascript:showhide(\'%s\',this)'%project.id"
				tal:condition="python:len(teams)>0" />
		</td>
		<td><a tal:attributes="href project/absolute_url" tal:content="project/title" /></td>
		</tr>
		<tr>
		<td></td>
		<td>
			<ul style="display: none" tal:attributes="id project/id" tal:condition="python:len(teams)>0">
				<li tal:repeat="team teams"> 
					<a tal:attributes="href team/absolute_url" tal:content="team/title" />
				</li>
			</ul>
		</td>
		</tr>
		</tal:inside>

	</tal:projects>
	</table>
	<h3>My Mailing Lists</h3>
	<p class="description">
		This is a list of all mailing lists you a member of.  To use a mailing list, use the "Mail options" system menu.
	</p>
	<table class="invisible">
	<tal:mail repeat="mailinglist view/lists">
		<tr>
			<td>
				<tal:listname content="mailinglist/listname" />
			</td>
			<td>
				<tal:listdescription content="mailinglist/description" />
			</td>
		</tr>
	</tal:mail>
	</table>
	
	<h3>Active Project Users</h3>
	<p class="description">
		This is a list of all active users in the projects you are a member of.
	</p>
	<div tal:repeat="user view/otherUsers">
		<p> <img src="user.gif" alt="User Online"> <span tal:content="user" /> </p>
	</div>
	</div>
	
	</tal:main-macro>
</metal:main>



</body>
</html>

